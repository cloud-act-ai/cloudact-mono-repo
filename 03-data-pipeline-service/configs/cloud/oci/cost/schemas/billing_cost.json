{
  "description": "OCI billing cost schema - comprehensive extraction with standardized x_* fields",
  "version": "3.1.0",
  "updated": "2026-01-23",
  "inherits": "system/schemas/x_standard_fields.json",

  "schemas": {
    "billing_cost": {
      "description": "Complete OCI billing cost data with all available fields for FOCUS 1.3 conversion",
      "fields": [
        {"name": "tenancy_id", "type": "STRING", "mode": "REQUIRED", "description": "OCI tenancy OCID - MAPS TO BillingAccountId"},
        {"name": "tenancy_name", "type": "STRING", "mode": "NULLABLE", "description": "OCI tenancy display name"},
        {"name": "compartment_id", "type": "STRING", "mode": "NULLABLE", "description": "OCI compartment OCID - MAPS TO SubAccountId"},
        {"name": "compartment_name", "type": "STRING", "mode": "NULLABLE", "description": "OCI compartment display name - MAPS TO SubAccountName"},
        {"name": "compartment_path", "type": "STRING", "mode": "NULLABLE", "description": "Full compartment path hierarchy"},

        {"name": "region", "type": "STRING", "mode": "NULLABLE", "description": "OCI region (e.g., us-phoenix-1, eu-frankfurt-1) - MAPS TO RegionId"},
        {"name": "availability_domain", "type": "STRING", "mode": "NULLABLE", "description": "OCI availability domain"},

        {"name": "service_name", "type": "STRING", "mode": "NULLABLE", "description": "OCI service name (e.g., COMPUTE, STORAGE) - MAPS TO ServiceName"},
        {"name": "sku_name", "type": "STRING", "mode": "NULLABLE", "description": "SKU name for the resource - MAPS TO ServiceSubcategory"},
        {"name": "sku_part_number", "type": "STRING", "mode": "NULLABLE", "description": "SKU part number - MAPS TO SkuId"},

        {"name": "resource_id", "type": "STRING", "mode": "NULLABLE", "description": "OCI resource OCID - MAPS TO ResourceId"},
        {"name": "resource_name", "type": "STRING", "mode": "NULLABLE", "description": "Resource display name - MAPS TO ResourceName"},
        {"name": "usage_type", "type": "STRING", "mode": "NULLABLE", "description": "Type of usage"},

        {"name": "usage_start_time", "type": "TIMESTAMP", "mode": "REQUIRED", "description": "When resource usage started - MAPS TO ChargePeriodStart"},
        {"name": "usage_end_time", "type": "TIMESTAMP", "mode": "REQUIRED", "description": "When resource usage ended - MAPS TO ChargePeriodEnd"},

        {"name": "usage_quantity", "type": "FLOAT64", "mode": "NULLABLE", "description": "Usage quantity - MAPS TO ConsumedQuantity"},
        {"name": "unit", "type": "STRING", "mode": "NULLABLE", "description": "Unit of measurement - MAPS TO ConsumedUnit"},
        {"name": "computed_quantity", "type": "FLOAT64", "mode": "NULLABLE", "description": "Computed/normalized quantity"},

        {"name": "cost", "type": "FLOAT64", "mode": "REQUIRED", "description": "Gross cost before credits - MAPS TO BilledCost"},
        {"name": "my_cost", "type": "FLOAT64", "mode": "NULLABLE", "description": "Net cost after credits (negative for credits) - MAPS TO EffectiveCost"},
        {"name": "cost_type", "type": "STRING", "mode": "NULLABLE", "description": "Type of cost (usage, credit, tax, adjustment) - MAPS TO ChargeCategory"},
        {"name": "list_rate", "type": "FLOAT64", "mode": "NULLABLE", "description": "List rate price per unit - MAPS TO ListUnitPrice"},
        {"name": "unit_price", "type": "FLOAT64", "mode": "NULLABLE", "description": "Effective unit price - MAPS TO ContractedUnitPrice"},
        {"name": "currency", "type": "STRING", "mode": "NULLABLE", "description": "Currency code (e.g., USD) - MAPS TO BillingCurrency"},

        {"name": "overage_flag", "type": "STRING", "mode": "NULLABLE", "description": "Whether this is overage usage (Y/N) - affects PricingCategory"},
        {"name": "is_correction", "type": "BOOLEAN", "mode": "NULLABLE", "description": "Whether this is a correction entry - MAPS TO ChargeClass"},

        {"name": "subscription_id", "type": "STRING", "mode": "NULLABLE", "description": "OCI subscription ID"},
        {"name": "platform_type", "type": "STRING", "mode": "NULLABLE", "description": "Platform type (IAAS, PAAS)"},
        {"name": "billing_period", "type": "STRING", "mode": "NULLABLE", "description": "Billing period identifier (YYYYMM)"},

        {"name": "credits_total", "type": "FLOAT64", "mode": "NULLABLE", "description": "Sum of all credit amounts (negative value)"},
        {"name": "credits_json", "type": "STRING", "mode": "NULLABLE", "description": "JSON array of credits with name, amount, type"},

        {"name": "freeform_tags_json", "type": "STRING", "mode": "NULLABLE", "description": "Freeform tags as JSON string - MAPS TO Tags"},
        {"name": "defined_tags_json", "type": "STRING", "mode": "NULLABLE", "description": "Defined tags as JSON string"},

        {"name": "x_ingestion_id", "type": "STRING", "mode": "REQUIRED", "description": "Unique row identifier (UUID) for traceability"},
        {"name": "x_ingestion_date", "type": "DATE", "mode": "REQUIRED", "description": "Date when data was ingested - PARTITION KEY"},
        {"name": "x_org_slug", "type": "STRING", "mode": "REQUIRED", "description": "Organization identifier for multi-tenancy"},

        {"name": "x_hierarchy_entity_id", "type": "STRING", "mode": "NULLABLE", "description": "Hierarchy entity ID (= compartment_id for OCI)"},
        {"name": "x_hierarchy_entity_name", "type": "STRING", "mode": "NULLABLE", "description": "Hierarchy entity name (= compartment_name for OCI)"},
        {"name": "x_hierarchy_level_code", "type": "STRING", "mode": "NULLABLE", "description": "Hierarchy level code (ORG, DEPT, PROJ, TEAM)"},
        {"name": "x_hierarchy_path", "type": "STRING", "mode": "NULLABLE", "description": "Full hierarchy path for cost rollup"},
        {"name": "x_hierarchy_path_names", "type": "STRING", "mode": "NULLABLE", "description": "Human-readable hierarchy path names"},
        {"name": "x_hierarchy_validated_at", "type": "TIMESTAMP", "mode": "NULLABLE", "description": "When hierarchy was validated"},

        {"name": "x_pipeline_id", "type": "STRING", "mode": "REQUIRED", "description": "Pipeline template name"},
        {"name": "x_credential_id", "type": "STRING", "mode": "NULLABLE", "description": "Credential ID from org_integration_credentials (optional for external queries)"},
        {"name": "x_pipeline_run_date", "type": "DATE", "mode": "REQUIRED", "description": "The data date being processed"},
        {"name": "x_run_id", "type": "STRING", "mode": "REQUIRED", "description": "Unique pipeline run UUID"},
        {"name": "x_ingested_at", "type": "TIMESTAMP", "mode": "REQUIRED", "description": "Timestamp when data was written"},

        {"name": "x_data_quality_score", "type": "FLOAT64", "mode": "NULLABLE", "description": "Data quality score (0-100)"},
        {"name": "x_created_at", "type": "TIMESTAMP", "mode": "NULLABLE", "description": "Original record creation timestamp"},

        {"name": "x_cloud_provider", "type": "STRING", "mode": "REQUIRED", "description": "Cloud provider identifier (OCI)"},
        {"name": "x_cloud_account_id", "type": "STRING", "mode": "NULLABLE", "description": "Cloud billing account identifier"}
      ]
    },
    "default": {
      "description": "Default schema - auto-detected from query results",
      "fields": []
    }
  }
}
