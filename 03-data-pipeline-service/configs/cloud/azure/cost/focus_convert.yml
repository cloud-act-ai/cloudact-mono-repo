# Azure Billing to FOCUS 1.3 Conversion Pipeline
#
# Converts Azure Cost Management data to FOCUS 1.3 standard format
# Schedule: Daily at 6:40 AM UTC (after billing pipeline completes)
# URL: POST /api/v1/pipelines/run/{org}/cloud/azure/cost/focus_convert

pipeline_id: "{org_slug}-azure-focus-convert"
name: "Azure FOCUS 1.3 Conversion"
description: "Convert Azure Cost Management data to FOCUS 1.3 standard"
provider: "azure"
domain: "cost"
version: "15.0.0"

schedule:
  cron: "40 6 * * *"
  timezone: "UTC"
  enabled: true

variables:
  org_slug: "{org_slug}"
  provider: "azure"

steps:
  - step_id: convert_azure_to_focus
    name: "Convert Azure Costs to FOCUS 1.3"
    ps_type: cloud.focus_converter
    description: "Convert Azure billing data to FOCUS 1.3 format"
    config:
      provider: "azure"
      date: "{date}"
    timeout_seconds: 600
    retry:
      max_attempts: 3
      backoff_seconds: 60

notifications:
  on_failure:
    - email
