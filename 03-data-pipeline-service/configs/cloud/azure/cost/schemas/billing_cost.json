{
  "description": "Azure Cost Management schema for BigQuery destination tables",
  "schemas": {
    "azure_billing_cost": {
      "description": "Azure cost export data schema with key cost and usage metrics",
      "fields": [
        {
          "name": "usage_date",
          "type": "DATE",
          "mode": "REQUIRED",
          "description": "Date of usage - partition key"
        },
        {
          "name": "org_slug",
          "type": "STRING",
          "mode": "REQUIRED",
          "description": "Organization identifier"
        },
        {
          "name": "provider",
          "type": "STRING",
          "mode": "REQUIRED",
          "description": "Cloud provider (azure)"
        },
        {
          "name": "subscription_id",
          "type": "STRING",
          "mode": "REQUIRED",
          "description": "Azure subscription ID"
        },
        {
          "name": "subscription_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Azure subscription display name"
        },
        {
          "name": "resource_group",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Azure resource group name"
        },
        {
          "name": "resource_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Full Azure resource ID"
        },
        {
          "name": "resource_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Resource display name"
        },
        {
          "name": "resource_type",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Azure resource type (e.g., Microsoft.Compute/virtualMachines)"
        },
        {
          "name": "resource_location",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Azure region (e.g., eastus, westeurope)"
        },
        {
          "name": "service_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Azure service name (e.g., Virtual Machines, Storage)"
        },
        {
          "name": "service_tier",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Service tier (e.g., Standard, Premium)"
        },
        {
          "name": "service_family",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Service family grouping"
        },
        {
          "name": "meter_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Azure meter GUID"
        },
        {
          "name": "meter_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Meter display name"
        },
        {
          "name": "meter_category",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Meter category (e.g., Virtual Machines)"
        },
        {
          "name": "meter_subcategory",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Meter subcategory"
        },
        {
          "name": "meter_region",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Meter region"
        },
        {
          "name": "product_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Product name"
        },
        {
          "name": "product_order_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Product order identifier"
        },
        {
          "name": "product_order_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Product order name"
        },
        {
          "name": "consumed_service",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Consumed Azure service"
        },
        {
          "name": "charge_type",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Type of charge (Usage, Purchase, Refund, etc.)"
        },
        {
          "name": "billing_period_start",
          "type": "DATE",
          "mode": "NULLABLE",
          "description": "Billing period start date"
        },
        {
          "name": "billing_period_end",
          "type": "DATE",
          "mode": "NULLABLE",
          "description": "Billing period end date"
        },
        {
          "name": "usage_start_time",
          "type": "TIMESTAMP",
          "mode": "NULLABLE",
          "description": "Start time of usage period"
        },
        {
          "name": "usage_end_time",
          "type": "TIMESTAMP",
          "mode": "NULLABLE",
          "description": "End time of usage period"
        },
        {
          "name": "usage_quantity",
          "type": "FLOAT64",
          "mode": "NULLABLE",
          "description": "Usage quantity"
        },
        {
          "name": "unit_of_measure",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Unit of measurement"
        },
        {
          "name": "cost_in_billing_currency",
          "type": "FLOAT64",
          "mode": "REQUIRED",
          "description": "Cost in billing currency - primary cost metric"
        },
        {
          "name": "cost_in_usd",
          "type": "FLOAT64",
          "mode": "NULLABLE",
          "description": "Cost converted to USD"
        },
        {
          "name": "billing_currency",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Billing currency code (e.g., USD, EUR)"
        },
        {
          "name": "exchange_rate",
          "type": "FLOAT64",
          "mode": "NULLABLE",
          "description": "Exchange rate to USD"
        },
        {
          "name": "effective_price",
          "type": "FLOAT64",
          "mode": "NULLABLE",
          "description": "Effective unit price"
        },
        {
          "name": "unit_price",
          "type": "FLOAT64",
          "mode": "NULLABLE",
          "description": "List unit price"
        },
        {
          "name": "pricing_model",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Pricing model (OnDemand, Reservation, Spot, SavingsPlan)"
        },
        {
          "name": "reservation_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Reserved Instance ID if applicable"
        },
        {
          "name": "reservation_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Reserved Instance name"
        },
        {
          "name": "frequency",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Billing frequency"
        },
        {
          "name": "publisher_type",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Publisher type (Azure, Marketplace)"
        },
        {
          "name": "publisher_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Publisher name for marketplace items"
        },
        {
          "name": "invoice_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Invoice ID"
        },
        {
          "name": "invoice_section_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Invoice section ID"
        },
        {
          "name": "invoice_section_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Invoice section name"
        },
        {
          "name": "billing_account_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Billing account ID"
        },
        {
          "name": "billing_account_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Billing account name"
        },
        {
          "name": "billing_profile_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Billing profile ID"
        },
        {
          "name": "billing_profile_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Billing profile name"
        },
        {
          "name": "cost_center",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Cost center from subscription"
        },
        {
          "name": "benefit_id",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Benefit ID (reservation or savings plan)"
        },
        {
          "name": "benefit_name",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Benefit name"
        },
        {
          "name": "is_azure_credit_eligible",
          "type": "BOOLEAN",
          "mode": "NULLABLE",
          "description": "Whether charge is eligible for Azure credits"
        },
        {
          "name": "resource_tags_json",
          "type": "STRING",
          "mode": "NULLABLE",
          "description": "Resource tags as JSON string"
        },
        {
          "name": "ingestion_timestamp",
          "type": "TIMESTAMP",
          "mode": "REQUIRED",
          "description": "When this record was ingested"
        },
        {
          "name": "x_pipeline_id",
          "type": "STRING",
          "mode": "REQUIRED",
          "description": "Pipeline template name. Example: cloud_cost_azure"
        },
        {
          "name": "x_credential_id",
          "type": "STRING",
          "mode": "REQUIRED",
          "description": "Credential ID from org_integration_credentials. KEY for multi-account isolation"
        },
        {
          "name": "x_pipeline_run_date",
          "type": "DATE",
          "mode": "REQUIRED",
          "description": "The DATA date being processed. KEY for idempotent re-runs"
        },
        {
          "name": "x_run_id",
          "type": "STRING",
          "mode": "REQUIRED",
          "description": "Unique pipeline run UUID for full traceability"
        },
        {
          "name": "x_ingested_at",
          "type": "TIMESTAMP",
          "mode": "REQUIRED",
          "description": "Timestamp when data was written to this table"
        }
      ]
    }
  }
}
