# GCP Billing to FOCUS 1.3 Conversion Pipeline
#
# Converts GCP billing data to FOCUS 1.3 standard format
# Schedule: Daily at 6:30 AM UTC (after billing pipeline completes)
# URL: POST /api/v1/pipelines/run/{org}/cloud/gcp/cost/focus_convert

pipeline_id: "{org_slug}-gcp-focus-convert"
name: "GCP FOCUS 1.3 Conversion"
description: "Convert GCP billing data to FOCUS 1.3 standard"
provider: "gcp"
domain: "cost"
version: "1.0.0"

schedule:
  cron: "30 6 * * *"
  timezone: "UTC"
  enabled: true

variables:
  org_slug: "{org_slug}"
  provider: "gcp"

steps:
  - step_id: convert_gcp_to_focus
    name: "Convert GCP Costs to FOCUS 1.3"
    ps_type: cloud.focus_converter
    description: "Convert GCP billing data to FOCUS 1.3 format"
    config:
      provider: "gcp"
      date: "{date}"
    timeout_seconds: 600
    retry:
      max_attempts: 3
      backoff_seconds: 60

notifications:
  on_failure:
    - email
