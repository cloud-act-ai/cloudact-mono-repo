# AWS Billing to FOCUS 1.3 Conversion Pipeline
#
# Converts AWS CUR billing data to FOCUS 1.3 standard format
# Schedule: Daily at 6:35 AM UTC (after billing pipeline completes)
# URL: POST /api/v1/pipelines/run/{org}/cloud/aws/cost/focus_convert

pipeline_id: "{org_slug}-aws-focus-convert"
name: "AWS FOCUS 1.3 Conversion"
description: "Convert AWS CUR billing data to FOCUS 1.3 standard"
provider: "aws"
domain: "cost"
version: "15.0.0"

schedule:
  cron: "35 6 * * *"
  timezone: "UTC"
  enabled: true

variables:
  org_slug: "{org_slug}"
  provider: "aws"

steps:
  - step_id: convert_aws_to_focus
    name: "Convert AWS Costs to FOCUS 1.3"
    ps_type: cloud.focus_converter
    description: "Convert AWS CUR data to FOCUS 1.3 format"
    config:
      provider: "aws"
      date: "{date}"
    timeout_seconds: 600
    retry:
      max_attempts: 3
      backoff_seconds: 60

notifications:
  on_failure:
    - email
