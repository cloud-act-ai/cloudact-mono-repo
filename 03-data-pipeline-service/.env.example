# =============================================
# CLOUDACT PIPELINE SERVICE - Environment Variables
# =============================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to version control
# =============================================

# =============================================
# REQUIRED IN PRODUCTION
# =============================================

# GCP Configuration (REQUIRED)
GCP_PROJECT_ID=your-gcp-project-id
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# KMS Encryption (REQUIRED for credential decryption)
# Same KMS key as API service - credentials are encrypted by API service
KMS_KEY_NAME=projects/your-project/locations/us-central1/keyRings/cloudact-keyring/cryptoKeys/cloudact-encryption-key

# CloudAct Root API Key (REQUIRED)
# Must match the key in api-service for inter-service auth
CA_ROOT_API_KEY=your-secure-root-api-key-minimum-32-chars

# =============================================
# SECURITY SETTINGS (Production Defaults)
# =============================================

# Environment: development | staging | production
ENVIRONMENT=development

# CRITICAL: Must be false in production
DISABLE_AUTH=false

# Rate limiting
RATE_LIMIT_ENABLED=true

# =============================================
# APPLICATION SETTINGS
# =============================================

# Pipeline Server
API_HOST=0.0.0.0
API_PORT=8001
API_WORKERS=4
API_RELOAD=true

# Logging
LOG_LEVEL=INFO
DEBUG=false

# API Documentation (disable in production)
ENABLE_API_DOCS=true

# =============================================
# BIGQUERY CONFIGURATION
# =============================================
BIGQUERY_LOCATION=US
BQ_MAX_RESULTS_PER_PAGE=10000
BQ_QUERY_TIMEOUT_SECONDS=300
BQ_MAX_RETRY_ATTEMPTS=3

# =============================================
# PIPELINE EXECUTION
# =============================================
# Max parallel steps per pipeline level
PIPELINE_MAX_PARALLEL_STEPS=10

# Max concurrent pipelines globally (prevents resource exhaustion)
PIPELINE_GLOBAL_CONCURRENT_LIMIT=100

# Default quotas (when subscription not found)
FALLBACK_DAILY_LIMIT=6
FALLBACK_MONTHLY_LIMIT=180
FALLBACK_CONCURRENT_LIMIT=6

# =============================================
# RATE LIMITING
# =============================================
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_PIPELINE_RUN_PER_MINUTE=50

# =============================================
# NOTIFICATIONS (Optional)
# =============================================
NOTIFICATIONS_ENABLED=false

# Email notifications for pipeline failures
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
# EMAIL_SMTP_USERNAME=your-email@gmail.com
# EMAIL_SMTP_PASSWORD=your-app-password
# EMAIL_FROM_ADDRESS=noreply@cloudact.ai

# Slack notifications (optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# SLACK_CHANNEL=#pipeline-alerts

# =============================================
# PROVIDER API URLS (Optional - defaults shown)
# =============================================
OPENAI_API_BASE_URL=https://api.openai.com/v1
ANTHROPIC_API_BASE_URL=https://api.anthropic.com/v1

# =============================================
# DEVELOPMENT/TESTING ONLY
# =============================================
# Enable test API keys from test_api_keys.json (DO NOT use in production)
ENABLE_DEV_MODE=false

# =============================================
# SETUP STEPS:
# =============================================
# 1. Ensure GCP project and BigQuery are configured (same as api-service)
# 2. Use the same KMS key as api-service
# 3. Use the same CA_ROOT_API_KEY as api-service
# 4. Copy configuration to .env.local
# 5. Run: python3 -m uvicorn src.app.main:app --host 0.0.0.0 --port 8001 --reload
# 6. Bootstrap must be run via api-service first
# =============================================
