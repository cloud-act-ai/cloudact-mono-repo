GENAI Integration Fixes - Modified Files (2026-01-08)
======================================================

STORED PROCEDURES (2 files):
----------------------------
1. /03-data-pipeline-service/configs/system/procedures/genai/sp_consolidate_genai_costs_daily.sql
   - Fix #1: Replaced 5 deprecated hierarchy fields with 20-field structure

2. /03-data-pipeline-service/configs/system/procedures/genai/sp_convert_genai_to_focus_1_3.sql
   - Fix #3a: Added credential_id filter to DELETE
   - Fix #3b: Added currency lookup from org_profiles
   - Fix #3c: Fixed ConsumedQuantity CASE statement
   - Fix #3d: Fixed ChargeFrequency for commitment

SCHEMA DEFINITIONS (7 files):
------------------------------
3. /02-api-service/configs/setup/organizations/onboarding/schemas/genai_costs_daily_unified.json
   - Fix #2: Added cached_cost_usd field
   - Fix #5: Added 3 effective_rate fields (input, output, cached)

4. /02-api-service/configs/setup/organizations/onboarding/schemas/genai_payg_pricing.json
   - Fix #4: Added 5 x_* lineage fields

5. /02-api-service/configs/setup/organizations/onboarding/schemas/genai_commitment_pricing.json
   - Fix #4: Added 5 x_* lineage fields

6. /02-api-service/configs/setup/organizations/onboarding/schemas/genai_infrastructure_pricing.json
   - Fix #4: Added 5 x_* lineage fields

7. /02-api-service/configs/setup/organizations/onboarding/schemas/genai_payg_usage_raw.json
   - Fix #6: Added hierarchy_validated_at field

8. /02-api-service/configs/setup/organizations/onboarding/schemas/genai_commitment_usage_raw.json
   - Fix #6: Added hierarchy_validated_at field

9. /02-api-service/configs/setup/organizations/onboarding/schemas/genai_infrastructure_usage_raw.json
   - Fix #6: Added hierarchy_validated_at field

DOCUMENTATION (2 files):
-------------------------
10. /00-requirements-specs/GENAI_FIXES_APPLIED_2026-01-08.md
    - Comprehensive fix summary and deployment guide

11. /00-requirements-specs/GENAI_FIXES_FILE_LIST.txt
    - This file - quick reference of modified files

TOTAL FILES MODIFIED: 9 code files + 2 documentation files = 11 files

GIT COMMIT SUGGESTION:
----------------------
Subject: Fix GenAI integration critical bugs - hierarchy, multi-credential, currency

Body:
- Fix #1: Update sp_consolidate_genai_costs_daily with 20 hierarchy fields
- Fix #2: Add cached_cost_usd to unified costs schema
- Fix #3: Multi-credential isolation + currency lookup in FOCUS conversion
- Fix #4: Add x_* lineage fields to 3 pricing schemas
- Fix #5: Add effective_rate fields to unified costs schema  
- Fix #6: Add hierarchy_validated_at to 3 usage raw schemas

Fixes column mismatch errors, prevents multi-credential data loss,
enables proper currency display, and adds audit trail fields.

Reference: GENAI_COMPREHENSIVE_BUG_FIXES_2026-01-08.md
Verified: All 6 fixes applied and verified
Impact: Unblocks production deployment of GenAI integration

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
