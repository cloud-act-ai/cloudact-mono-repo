# =============================================
# CLOUDACT API SERVICE - Environment Variables
# =============================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to version control
# =============================================

# =============================================
# REQUIRED IN PRODUCTION
# =============================================

# GCP Configuration (REQUIRED)
GCP_PROJECT_ID=your-gcp-project-id
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# KMS Encryption (REQUIRED for credential encryption)
# Full path: projects/{project}/locations/{location}/keyRings/{keyring}/cryptoKeys/{key}
KMS_KEY_NAME=projects/your-project/locations/us-central1/keyRings/cloudact-keyring/cryptoKeys/cloudact-encryption-key
# Or specify components separately:
# KMS_PROJECT_ID=your-gcp-project-id
# KMS_LOCATION=us-central1
# KMS_KEYRING=cloudact-keyring
# KMS_KEY=cloudact-encryption-key

# CloudAct Root API Key (REQUIRED)
# Used for bootstrap and org management operations
# Minimum 32 characters for production security
CA_ROOT_API_KEY=your-secure-root-api-key-minimum-32-chars

# API Key Secret (REQUIRED in production)
API_KEY_SECRET_KEY=your-secret-key-for-api-key-signing

# =============================================
# SECURITY SETTINGS (Production Defaults)
# =============================================

# Environment: development | staging | production
ENVIRONMENT=development

# CRITICAL: Must be false in production
# When true, bypasses API key authentication (DEV ONLY)
DISABLE_AUTH=false

# Rate limiting (must be true in production)
RATE_LIMIT_ENABLED=true

# =============================================
# APPLICATION SETTINGS
# =============================================

# API Server
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true

# Logging
LOG_LEVEL=INFO
DEBUG=false
EXPOSE_ERROR_DETAILS=false

# API Documentation (disable in production for security)
ENABLE_API_DOCS=true

# =============================================
# CORS CONFIGURATION
# =============================================
# JSON array of allowed origins
# Use specific domains, not wildcards with credentials
CORS_ORIGINS=["http://localhost:3000"]

# =============================================
# RATE LIMITING
# =============================================
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_GLOBAL_REQUESTS_PER_MINUTE=10000
RATE_LIMIT_GLOBAL_REQUESTS_PER_HOUR=100000

# =============================================
# BIGQUERY CONFIGURATION
# =============================================
BIGQUERY_LOCATION=US
BQ_MAX_RESULTS_PER_PAGE=10000
BQ_QUERY_TIMEOUT_SECONDS=300

# =============================================
# PIPELINE SERVICE URL (for proxy)
# =============================================
PIPELINE_SERVICE_URL=http://localhost:8001

# =============================================
# MAINTENANCE MODE
# =============================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Service is under maintenance. Please try again later.

# =============================================
# PROVIDER TIMEOUTS
# =============================================
PROVIDER_TIMEOUT_OPENAI=30.0
PROVIDER_TIMEOUT_ANTHROPIC=30.0
PROVIDER_TIMEOUT_GCP=60.0

# =============================================
# NOTIFICATIONS (Optional)
# =============================================
NOTIFICATIONS_ENABLED=false
EMAIL_NOTIFICATIONS_ENABLED=false
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
# EMAIL_SMTP_USERNAME=your-email@gmail.com
# EMAIL_SMTP_PASSWORD=your-app-password
# EMAIL_FROM_ADDRESS=noreply@cloudact.ai

# =============================================
# SETUP STEPS:
# =============================================
# 1. Create a GCP project and enable BigQuery API
# 2. Create a service account with BigQuery Admin role
# 3. Download the service account JSON key
# 4. Create a KMS keyring and key for encryption
# 5. Grant the service account Cloud KMS CryptoKey Encrypter/Decrypter role
# 6. Copy all configuration to .env.local
# 7. Run: python3 -m uvicorn src.app.main:app --host 0.0.0.0 --port 8000 --reload
# =============================================
