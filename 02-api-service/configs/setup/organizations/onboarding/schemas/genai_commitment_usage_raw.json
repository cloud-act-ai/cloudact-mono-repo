[
  {"name": "usage_date", "type": "DATE", "mode": "REQUIRED", "description": "Date of usage (partition field)."},
  {"name": "org_slug", "type": "STRING", "mode": "REQUIRED", "description": "Organization identifier for multi-tenancy."},
  {"name": "provider", "type": "STRING", "mode": "REQUIRED", "description": "Commitment provider: azure_openai_ptu, aws_bedrock_pt, gcp_vertex_pt."},
  {"name": "commitment_type", "type": "STRING", "mode": "REQUIRED", "description": "Type: ptu, provisioned_throughput, gsu."},
  {"name": "commitment_id", "type": "STRING", "mode": "NULLABLE", "description": "Provider-assigned commitment/reservation ID."},
  {"name": "model", "type": "STRING", "mode": "REQUIRED", "description": "Model covered by commitment."},
  {"name": "region", "type": "STRING", "mode": "REQUIRED", "description": "Deployment region."},
  {"name": "provisioned_units", "type": "INT64", "mode": "NULLABLE", "description": "Number of PTU/units provisioned."},
  {"name": "used_units", "type": "INT64", "mode": "NULLABLE", "description": "Actual units consumed."},
  {"name": "utilization_pct", "type": "FLOAT64", "mode": "NULLABLE", "description": "Utilization percentage (used/provisioned * 100)."},
  {"name": "tokens_processed", "type": "INT64", "mode": "NULLABLE", "description": "Total tokens processed through commitment."},
  {"name": "request_count", "type": "INT64", "mode": "NULLABLE", "description": "Number of requests served."},
  {"name": "avg_latency_ms", "type": "FLOAT64", "mode": "NULLABLE", "description": "Average response latency."},
  {"name": "hours_active", "type": "FLOAT64", "mode": "NULLABLE", "description": "Hours commitment was active."},
  {"name": "hierarchy_entity_id", "type": "STRING", "mode": "NULLABLE", "description": "Reference to org_hierarchy entity_id for cost allocation. The leaf-level entity in the hierarchy path."},
  {"name": "hierarchy_entity_name", "type": "STRING", "mode": "NULLABLE", "description": "Entity name for reporting (denormalized from org_hierarchy)."},
  {"name": "hierarchy_level_code", "type": "STRING", "mode": "NULLABLE", "description": "Hierarchy level code (e.g., 'department', 'project', 'team'). Identifies the depth in the hierarchy."},
  {"name": "hierarchy_path", "type": "STRING", "mode": "NULLABLE", "description": "Full materialized path from root to entity (e.g., '/DEPT-001/PROJ-001/TEAM-001'). Enables rollup queries at any level."},
  {"name": "hierarchy_path_names", "type": "STRING", "mode": "NULLABLE", "description": "Full path of names from root to entity (e.g., '/Engineering/Cloud Platform/DevOps'). Human-readable hierarchy trail."},
  {"name": "x_pipeline_id", "type": "STRING", "mode": "REQUIRED", "description": "Pipeline template name. Example: genai_commitment_usage."},
  {"name": "x_credential_id", "type": "STRING", "mode": "REQUIRED", "description": "Credential ID from org_integration_credentials. KEY for multi-account isolation."},
  {"name": "x_pipeline_run_date", "type": "DATE", "mode": "REQUIRED", "description": "The DATA date being processed. KEY for idempotent re-runs."},
  {"name": "x_run_id", "type": "STRING", "mode": "REQUIRED", "description": "Unique pipeline run UUID for full traceability."},
  {"name": "x_ingested_at", "type": "TIMESTAMP", "mode": "REQUIRED", "description": "Timestamp when data was written to this table."}
]
