# ============================================
# Terraform Variables - Example Configuration
# ============================================
# Copy this file to terraform.tfvars and customize for your environment
# DO NOT commit terraform.tfvars to version control
# ============================================

# ============================================
# Project Configuration
# ============================================

project_id  = "your-gcp-project-id"
region      = "us-central1"
environment = "dev" # dev, staging, or production

# ============================================
# GKE Configuration
# ============================================

gke_cluster_name = "convergence-pipeline-cluster"
gke_network_name = "convergence-vpc"
gke_subnet_name  = "convergence-subnet"

# Network CIDR ranges
gke_subnet_cidr   = "10.0.0.0/20"
gke_pods_cidr     = "10.4.0.0/14"
gke_services_cidr = "10.8.0.0/20"
gke_master_cidr   = "172.16.0.0/28"

# Private cluster settings
enable_private_endpoint = false # Set to true for production
enable_private_nodes    = true

# Authorized networks (who can access k8s API)
authorized_networks = [
  {
    cidr_block   = "0.0.0.0/0"
    display_name = "All networks - CHANGE FOR PRODUCTION"
  }
]

# ============================================
# Application Configuration
# ============================================

app_name    = "convergence-pipeline"
app_version = "latest"

# Container image (update after building)
container_image = "gcr.io/your-gcp-project-id/convergence-pipeline:latest"

# Autoscaling
min_replicas = 2
max_replicas = 10

# Resource limits
cpu_request    = "500m"
cpu_limit      = "1000m"
memory_request = "1Gi"
memory_limit   = "2Gi"

# Target CPU utilization for autoscaling
target_cpu_utilization = 80

# ============================================
# Storage Configuration
# ============================================

data_retention_days = 90

# Customer-managed encryption keys
enable_cmek = false # Set to true for production

# Create Terraform state bucket
create_terraform_state_bucket = false

# ============================================
# Security Configuration
# ============================================

# Cloud Armor DDoS protection
enable_cloud_armor = true

# Rate limiting (requests per minute per IP)
rate_limit_threshold = 1000

# Allowed source IP ranges
allowed_source_ranges = ["0.0.0.0/0"] # Restrict for production

# ============================================
# IAM Configuration
# ============================================

create_service_account = true
service_account_name   = "convergence-pipeline-sa"

# BigQuery roles
bigquery_roles = [
  "roles/bigquery.dataEditor",
  "roles/bigquery.jobUser",
]

# Storage roles
storage_roles = [
  "roles/storage.objectAdmin",
]

# ============================================
# Monitoring & Logging
# ============================================

enable_workload_identity = true
log_retention_days       = 30

# ============================================
# Labels and Tags
# ============================================

labels = {
  managed_by = "terraform"
  component  = "convergence-pipeline"
  team       = "data-engineering"
  cost_center = "engineering"
}

network_tags = [
  "convergence-pipeline",
  "gke-node"
]

# ============================================
# Environment-Specific Examples
# ============================================

# Development Environment
# -----------------------
# project_id             = "my-project-dev"
# environment            = "dev"
# min_replicas           = 1
# max_replicas           = 3
# enable_cloud_armor     = false
# enable_cmek            = false
# data_retention_days    = 30

# Staging Environment
# -------------------
# project_id             = "my-project-staging"
# environment            = "staging"
# min_replicas           = 2
# max_replicas           = 5
# enable_cloud_armor     = true
# enable_cmek            = false
# data_retention_days    = 60

# Production Environment
# ----------------------
# project_id              = "my-project-prod"
# environment             = "production"
# min_replicas            = 3
# max_replicas            = 20
# enable_cloud_armor      = true
# enable_cmek             = true
# enable_private_endpoint = true
# data_retention_days     = 365
# authorized_networks = [
#   {
#     cidr_block   = "203.0.113.0/24"
#     display_name = "Corporate VPN"
#   },
#   {
#     cidr_block   = "198.51.100.0/24"
#     display_name = "Office Network"
#   }
# ]
