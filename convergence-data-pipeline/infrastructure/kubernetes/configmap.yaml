# ============================================
# ConfigMap - Application Configuration
# ============================================
# Non-sensitive configuration for the application
# Replace placeholder values with your actual configuration
# ============================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: convergence-pipeline-config
  namespace: default # Change to 'convergence-pipeline' if using custom namespace
  labels:
    app: convergence-pipeline
    component: config
    managed-by: kubectl
data:
  # Application Settings
  APP_NAME: "Convergence Data Pipeline"
  APP_VERSION: "1.0.0"
  ENVIRONMENT: "production"

  # API Configuration
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_RELOAD: "false"

  # GCP Configuration
  GCP_PROJECT_ID: "your-gcp-project-id" # CHANGE THIS
  GCP_REGION: "us-central1"

  # BigQuery Configuration
  BQ_DATASET_ID: "convergence_metadata"
  BQ_LOCATION: "US"

  # Logging Configuration
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"
  ENABLE_STRUCTURED_LOGGING: "true"

  # Rate Limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_REQUESTS_PER_MINUTE: "100"
  RATE_LIMIT_REQUESTS_PER_HOUR: "1000"
  RATE_LIMIT_GLOBAL_REQUESTS_PER_MINUTE: "1000"
  RATE_LIMIT_GLOBAL_REQUESTS_PER_HOUR: "10000"

  # CORS Configuration
  CORS_ORIGINS: '["*"]' # Restrict in production
  CORS_ALLOW_CREDENTIALS: "true"
  CORS_ALLOW_METHODS: '["GET","POST","PUT","DELETE","OPTIONS"]'
  CORS_ALLOW_HEADERS: '["*"]'

  # Feature Flags
  ENABLE_TRACING: "true"
  ENABLE_METRICS: "true"
  DEBUG: "false"

  # Observability
  ENABLE_PROMETHEUS_METRICS: "true"
  ENABLE_CLOUD_LOGGING: "true"
  ENABLE_CLOUD_TRACE: "true"

  # Pipeline Configuration
  MAX_CONCURRENT_PIPELINES: "10"
  PIPELINE_TIMEOUT_SECONDS: "3600"

  # Request Validation
  MAX_REQUEST_SIZE_BYTES: "10485760" # 10MB
  REQUEST_TIMEOUT_SECONDS: "300"

  # Retry Configuration
  MAX_RETRIES: "3"
  RETRY_BACKOFF_SECONDS: "2"

  # Health Check Configuration
  HEALTH_CHECK_INTERVAL_SECONDS: "30"
  READINESS_TIMEOUT_SECONDS: "5"
