ps_type: "setup.initial.onetime_bootstrap"
name: "One-Time Bootstrap Setup"
description: "Creates central organizations dataset and all management tables"
version: "1.1.0"

dataset:
  name: "organizations"
  description: "Central dataset for organization management"
  location: "US"

# Table configs - schema from schemas/{name}.json, partitioning/clustering defined here
tables:
  org_profiles:
    description: "Organization profiles"

  org_api_keys:
    description: "API keys (SHA256 hashed)"

  org_subscriptions:
    description: "Subscription plans and limits"

  org_usage_quotas:
    description: "Usage tracking"
    partition:
      type: "DAY"
      field: "usage_date"
    clustering: ["org_slug", "usage_date"]

  org_cloud_credentials:
    description: "Cloud credentials (KMS encrypted)"

  org_pipeline_configs:
    description: "Pipeline configurations"

  org_scheduled_pipeline_runs:
    description: "Scheduled pipeline runs"
    partition:
      type: "DAY"
      field: "scheduled_time"
    clustering: ["org_slug", "state", "config_id"]

  org_pipeline_execution_queue:
    description: "Execution queue"
    partition:
      type: "DAY"
      field: "scheduled_time"
    clustering: ["state", "priority", "org_slug"]

  org_meta_pipeline_runs:
    description: "Pipeline execution logs"
    partition:
      type: "DAY"
      field: "start_time"
    clustering: ["org_slug", "status"]

  org_meta_step_logs:
    description: "Step execution logs"
    partition:
      type: "DAY"
      field: "start_time"
    clustering: ["org_slug", "pipeline_logging_id"]

  org_meta_dq_results:
    description: "Data quality results"
    partition:
      type: "DAY"
      field: "ingestion_date"
    clustering: ["org_slug", "overall_status"]
