# OpenAI Usage Sync Pipeline
# Fetches usage data from OpenAI and stores in BigQuery

pipeline_id: "{org_slug}-openai-usage-sync"
name: "OpenAI Usage Sync"
description: "Fetches OpenAI API usage data and stores in BigQuery"
version: "1.0.0"

variables:
  org_slug: "{org_slug}"
  provider: "OPENAI"

steps:
  - step_id: "fetch_openai_usage"
    ps_type: "openai.usage"
    description: "Fetch usage data from OpenAI API"
    config:
      start_date: "{start_date}"  # Optional: defaults to yesterday
      end_date: "{end_date}"      # Optional: defaults to today
      store_to_bq: true

requires_auth: true
auth_type: "org_api_key"

tags:
  - usage
  - openai
  - llm
  - billing
category: "usage"
